(function(l,n){"object"===typeof exports&&"undefined"!==typeof module?module.exports=n(require("jquery")):"function"===typeof define&&define.amd?define(["jquery"],n):l.Mark=n(l.jQuery)})(this,function(l){function n(a){n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return n(a)}function u(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}function y(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function v(a,b,c){b&&y(a.prototype,b);c&&y(a,c);return a}function s(){s=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};return s.apply(this,arguments)}l=l&&l.hasOwnProperty("default")?l["default"]:l;var t,q=function(a){var b=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:5E3;u(this,q);this.ctx=a;this.iframes=b;this.exclude=c;this.iframesTimeout=d};v(q,[{key:"getContexts",value:function(){var a=[];("undefined"===typeof this.ctx||!this.ctx?[]:NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"===typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):
[this.ctx]).forEach(function(b){var c=0<a.filter(function(a){return a.contains(b)}).length;-1===a.indexOf(b)&&!c&&a.push(b)});return a}},{key:"getIframeContents",value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},d;try{var e=a.contentWindow;d=e.document;if(!e||!d)throw Error("iframe inaccessible");}catch(f){c()}d&&b(d)}},{key:"isIframeBlank",value:function(a){var b=a.getAttribute("src").trim();return"about:blank"===a.contentWindow.location.href&&"about:blank"!==
b&&b}},{key:"observeIframeLoad",value:function(a,b,c){var d=this,e=!1,f=null,g=function h(){if(!e){e=!0;clearTimeout(f);try{d.isIframeBlank(a)||(a.removeEventListener("load",h),d.getIframeContents(a,b,c))}catch(g){c()}}};a.addEventListener("load",g);f=setTimeout(g,this.iframesTimeout)}},{key:"onIframeReady",value:function(a,b,c){try{"complete"===a.contentWindow.document.readyState?this.isIframeBlank(a)?this.observeIframeLoad(a,b,c):this.getIframeContents(a,b,c):this.observeIframeLoad(a,b,c)}catch(d){c()}}},
{key:"waitForIframes",value:function(a,b){var c=this,d=0;this.forEachIframe(a,function(){return!0},function(a){d++;c.waitForIframes(a.querySelector("html"),function(){--d||b()})},function(a){a||b()})}},{key:"forEachIframe",value:function(a,b,c){var d=this,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},f=a.querySelectorAll("iframe"),g=f.length,k=0,f=Array.prototype.slice.call(f),h=function(){0>=--g&&e(k)};g||h();f.forEach(function(a){if(q.matches(a,d.exclude))h();else d.onIframeReady(a,
function(d){b(a)&&(k++,c(d));h()},h)})}},{key:"createIterator",value:function(a,b,c){return document.createNodeIterator(a,b,c,!1)}},{key:"createInstanceOnIframe",value:function(a){return new q(a.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(a,b,c){if(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_PRECEDING)if(null!==b){if(b.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(a){var b=
a.previousNode();a=null===b?a.nextNode():a.nextNode()&&a.nextNode();return{prevNode:b,node:a}}},{key:"checkIframeFilter",value:function(a,b,c,d){var e=!1,f=!1;d.forEach(function(a,b){a.val===c&&(e=b,f=a.handled)});if(this.compareNodeIframe(a,b,c))return!1===e&&!f?d.push({val:c,handled:!0}):!1!==e&&!f&&(d[e].handled=!0),!0;!1===e&&d.push({val:c,handled:!1});return!1}},{key:"handleOpenIframes",value:function(a,b,c,d){var e=this;a.forEach(function(a){a.handled||e.getIframeContents(a.val,function(a){e.createInstanceOnIframe(a).forEachNode(b,
c,d)})})}},{key:"iterateThroughNodes",value:function(a,b,c,d,e){for(var f=this,g=this.createIterator(b,a,d),k=[],h=[],j,m,p=function(){var a=f.getIteratorNode(g);m=a.prevNode;return j=a.node};p();)this.iframes&&this.forEachIframe(b,function(a){return f.checkIframeFilter(j,m,a,k)},function(b){f.createInstanceOnIframe(b).forEachNode(a,function(a){return h.push(a)},d)}),h.push(j);h.forEach(function(a){c(a)});this.iframes&&this.handleOpenIframes(k,a,c,d);e()}},{key:"forEachNode",value:function(a,b,c){var d=
this,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},f=this.getContexts(),g=f.length;g||e();f.forEach(function(f){var h=function(){d.iterateThroughNodes(a,f,b,c,function(){0>=--g&&e()})};d.iframes?d.waitForIframes(f,h):h()})}}],[{key:"matches",value:function(a,b){var c="string"===typeof b?[b]:b,d=a.matches||a.matchesSelector||a.msMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector;if(d){var e=!1;c.every(function(b){return d.call(a,b)?(e=!0,!1):
!0});return e}return!1}}]);t=q;var z,w=function(a){u(this,w);this.opt=s({},{diacritics:!0,synonyms:{},accuracy:"partially",caseSensitive:!1,ignoreJoiners:!1,ignorePunctuation:[],wildcards:"disabled"},a)};v(w,[{key:"create",value:function(a){"disabled"!==this.opt.wildcards&&(a=this.setupWildcardsRegExp(a));a=this.escapeStr(a);Object.keys(this.opt.synonyms).length&&(a=this.createSynonymsRegExp(a));if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)a=this.setupIgnoreJoinersRegExp(a);this.opt.diacritics&&
(a=this.createDiacriticsRegExp(a));a=this.createMergedBlanksRegExp(a);if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)a=this.createJoinersRegExp(a);"disabled"!==this.opt.wildcards&&(a=this.createWildcardsRegExp(a));a=this.createAccuracyRegExp(a);return RegExp(a,"gm".concat(this.opt.caseSensitive?"":"i"))}},{key:"sortByLength",value:function(a){return a.sort(function(a,c){return a.length===c.length?a>c?1:-1:c.length-a.length})}},{key:"escapeStr",value:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,
"\\$&")}},{key:"createSynonymsRegExp",value:function(a){var b=this,c=this.opt.synonyms,d=this.opt.caseSensitive?"":"i",e=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\x00":"",f;for(f in c)if(c.hasOwnProperty(f)){var g=Array.isArray(c[f])?c[f]:[c[f]];g.unshift(f);g=this.sortByLength(g).map(function(a){"disabled"!==b.opt.wildcards&&(a=b.setupWildcardsRegExp(a));return a=b.escapeStr(a)}).filter(function(a){return""!==a});1<g.length&&(a=a.replace(RegExp("(".concat(g.map(function(a){return b.escapeStr(a)}).join("|"),
")"),"gm".concat(d)),e+"(".concat(g.map(function(a){return b.processSynonyms(a)}).join("|"),")")+e))}return a}},{key:"processSynonyms",value:function(a){if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)a=this.setupIgnoreJoinersRegExp(a);return a}},{key:"setupWildcardsRegExp",value:function(a){a=a.replace(/(?:\\)*\?/g,function(a){return"\\"===a.charAt(0)?"?":"\u0001"});return a.replace(/(?:\\)*\*/g,function(a){return"\\"===a.charAt(0)?"*":"\u0002"})}},{key:"createWildcardsRegExp",value:function(a){var b=
"withSpaces"===this.opt.wildcards;return a.replace(/\u0001/g,b?"[\\S\\s]?":"\\S?").replace(/\u0002/g,b?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(a){return a.replace(/[^(|)\\]/g,function(a,c,d){c=d.charAt(c+1);return/[(|)\\]/.test(c)||""===c?a:a+"\x00"})}},{key:"createJoinersRegExp",value:function(a){var b=[],c=this.opt.ignorePunctuation;Array.isArray(c)&&c.length&&b.push(this.escapeStr(c.join("")));this.opt.ignoreJoiners&&b.push("\\u00ad\\u200b\\u200c\\u200d");return b.length?
a.split(/\u0000+/).join("[".concat(b.join(""),"]*")):a}},{key:"createDiacriticsRegExp",value:function(a){var b=this.opt.caseSensitive?"":"i",c=this.opt.caseSensitive?"a\u00e0\u00e1\u1ea3\u00e3\u1ea1\u0103\u1eb1\u1eaf\u1eb3\u1eb5\u1eb7\u00e2\u1ea7\u1ea5\u1ea9\u1eab\u1ead\u00e4\u00e5\u0101\u0105 A\u00c0\u00c1\u1ea2\u00c3\u1ea0\u0102\u1eb0\u1eae\u1eb2\u1eb4\u1eb6\u00c2\u1ea6\u1ea4\u1ea8\u1eaa\u1eac\u00c4\u00c5\u0100\u0104 c\u00e7\u0107\u010d C\u00c7\u0106\u010c d\u0111\u010f D\u0110\u010e e\u00e8\u00e9\u1ebb\u1ebd\u1eb9\u00ea\u1ec1\u1ebf\u1ec3\u1ec5\u1ec7\u00eb\u011b\u0113\u0119 E\u00c8\u00c9\u1eba\u1ebc\u1eb8\u00ca\u1ec0\u1ebe\u1ec2\u1ec4\u1ec6\u00cb\u011a\u0112\u0118 i\u00ec\u00ed\u1ec9\u0129\u1ecb\u00ee\u00ef\u012b I\u00cc\u00cd\u1ec8\u0128\u1eca\u00ce\u00cf\u012a l\u0142 L\u0141 n\u00f1\u0148\u0144 N\u00d1\u0147\u0143 o\u00f2\u00f3\u1ecf\u00f5\u1ecd\u00f4\u1ed3\u1ed1\u1ed5\u1ed7\u1ed9\u01a1\u1edf\u1ee1\u1edb\u1edd\u1ee3\u00f6\u00f8\u014d O\u00d2\u00d3\u1ece\u00d5\u1ecc\u00d4\u1ed2\u1ed0\u1ed4\u1ed6\u1ed8\u01a0\u1ede\u1ee0\u1eda\u1edc\u1ee2\u00d6\u00d8\u014c r\u0159 R\u0158 s\u0161\u015b\u0219\u015f S\u0160\u015a\u0218\u015e t\u0165\u021b\u0163 T\u0164\u021a\u0162 u\u00f9\u00fa\u1ee7\u0169\u1ee5\u01b0\u1eeb\u1ee9\u1eed\u1eef\u1ef1\u00fb\u00fc\u016f\u016b U\u00d9\u00da\u1ee6\u0168\u1ee4\u01af\u1eea\u1ee8\u1eec\u1eee\u1ef0\u00db\u00dc\u016e\u016a y\u00fd\u1ef3\u1ef7\u1ef9\u1ef5\u00ff Y\u00dd\u1ef2\u1ef6\u1ef8\u1ef4\u0178 z\u017e\u017c\u017a Z\u017d\u017b\u0179".split(" "):
"a\u00e0\u00e1\u1ea3\u00e3\u1ea1\u0103\u1eb1\u1eaf\u1eb3\u1eb5\u1eb7\u00e2\u1ea7\u1ea5\u1ea9\u1eab\u1ead\u00e4\u00e5\u0101\u0105A\u00c0\u00c1\u1ea2\u00c3\u1ea0\u0102\u1eb0\u1eae\u1eb2\u1eb4\u1eb6\u00c2\u1ea6\u1ea4\u1ea8\u1eaa\u1eac\u00c4\u00c5\u0100\u0104 c\u00e7\u0107\u010dC\u00c7\u0106\u010c d\u0111\u010fD\u0110\u010e e\u00e8\u00e9\u1ebb\u1ebd\u1eb9\u00ea\u1ec1\u1ebf\u1ec3\u1ec5\u1ec7\u00eb\u011b\u0113\u0119E\u00c8\u00c9\u1eba\u1ebc\u1eb8\u00ca\u1ec0\u1ebe\u1ec2\u1ec4\u1ec6\u00cb\u011a\u0112\u0118 i\u00ec\u00ed\u1ec9\u0129\u1ecb\u00ee\u00ef\u012bI\u00cc\u00cd\u1ec8\u0128\u1eca\u00ce\u00cf\u012a l\u0142L\u0141 n\u00f1\u0148\u0144N\u00d1\u0147\u0143 o\u00f2\u00f3\u1ecf\u00f5\u1ecd\u00f4\u1ed3\u1ed1\u1ed5\u1ed7\u1ed9\u01a1\u1edf\u1ee1\u1edb\u1edd\u1ee3\u00f6\u00f8\u014dO\u00d2\u00d3\u1ece\u00d5\u1ecc\u00d4\u1ed2\u1ed0\u1ed4\u1ed6\u1ed8\u01a0\u1ede\u1ee0\u1eda\u1edc\u1ee2\u00d6\u00d8\u014c r\u0159R\u0158 s\u0161\u015b\u0219\u015fS\u0160\u015a\u0218\u015e t\u0165\u021b\u0163T\u0164\u021a\u0162 u\u00f9\u00fa\u1ee7\u0169\u1ee5\u01b0\u1eeb\u1ee9\u1eed\u1eef\u1ef1\u00fb\u00fc\u016f\u016bU\u00d9\u00da\u1ee6\u0168\u1ee4\u01af\u1eea\u1ee8\u1eec\u1eee\u1ef0\u00db\u00dc\u016e\u016a y\u00fd\u1ef3\u1ef7\u1ef9\u1ef5\u00ffY\u00dd\u1ef2\u1ef6\u1ef8\u1ef4\u0178 z\u017e\u017c\u017aZ\u017d\u017b\u0179".split(" "),
d=[];a.split("").forEach(function(e){c.every(function(c){if(-1!==c.indexOf(e)){if(-1<d.indexOf(c))return!1;a=a.replace(RegExp("[".concat(c,"]"),"gm".concat(b)),"[".concat(c,"]"));d.push(c)}return!0})});return a}},{key:"createMergedBlanksRegExp",value:function(a){return a.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(a){var b=this,c=this.opt.accuracy,d="string"===typeof c?c:c.value,e="";("string"===typeof c?[]:c.limiters).forEach(function(a){e+="|".concat(b.escapeStr(a))});
switch(d){default:return"()(".concat(a,")");case "complementary":return e="\\s"+(e?e:this.escapeStr("!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~\u00a1\u00bf")),"()([^".concat(e,"]*").concat(a,"[^").concat(e,"]*)");case "exactly":return"(^|\\s".concat(e,")(").concat(a,")(?=$|\\s").concat(e,")")}}}]);z=w;var r,x=function(a){u(this,x);this.ctx=a;this.ie=!1;a=window.navigator.userAgent;if(-1<a.indexOf("MSIE")||-1<a.indexOf("Trident"))this.ie=!0};v(x,[{key:"log",value:function(a){var b=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:"debug",c=this.opt.log;if(this.opt.debug&&"object"===n(c)&&"function"===typeof c[b])c[b]("mark.js: ".concat(a))}},{key:"getSeparatedKeywords",value:function(a){var b=this,c=[];a.forEach(function(a){b.opt.separateWordSearch?a.split(" ").forEach(function(a){a.trim()&&-1===c.indexOf(a)&&c.push(a)}):a.trim()&&-1===c.indexOf(a)&&c.push(a)});return{keywords:c.sort(function(a,c){return c.length-a.length}),length:c.length}}},{key:"isNumeric",value:function(a){return Number(parseFloat(a))==
a}},{key:"checkRanges",value:function(a){var b=this;if(!Array.isArray(a)||"[object Object]"!==Object.prototype.toString.call(a[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(a),[];var c=[],d=0;a.sort(function(a,c){return a.start-c.start}).forEach(function(a){var f=b.callNoMatchOnInvalidRanges(a,d),g=f.start,k=f.end;f.valid&&(a.start=g,a.length=k-g,c.push(a),d=k)});return c}},{key:"callNoMatchOnInvalidRanges",value:function(a,b){var c,d,e=!1;a&&"undefined"!==
typeof a.start?(c=parseInt(a.start,10),d=c+parseInt(a.length,10),this.isNumeric(a.start)&&this.isNumeric(a.length)&&0<d-b&&0<d-c?e=!0:(this.log("Ignoring invalid or overlapping range: "+"".concat(JSON.stringify(a))),this.opt.noMatch(a))):(this.log("Ignoring invalid range: ".concat(JSON.stringify(a))),this.opt.noMatch(a));return{start:c,end:d,valid:e}}},{key:"checkWhitespaceRanges",value:function(a,b,c){var d=!0,e=c.length,f=parseInt(a.start,10)-(b-e),f=f>e?e:f;b=f+parseInt(a.length,10);b>e&&(b=e,
this.log("End range automatically set to the max value of ".concat(e)));0>f||0>b-f||f>e||b>e?(d=!1,this.log("Invalid range: ".concat(JSON.stringify(a))),this.opt.noMatch(a)):""===c.substring(f,b).replace(/\s+/g,"")&&(d=!1,this.log("Skipping whitespace only range: "+JSON.stringify(a)),this.opt.noMatch(a));return{start:f,end:b,valid:d}}},{key:"getTextNodes",value:function(a){var b=this,c="",d=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(a){d.push({start:c.length,end:(c+=a.textContent).length,
node:a})},function(a){return b.matchesExclude(a.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){a({value:c,nodes:d})})}},{key:"matchesExclude",value:function(a){return t.matches(a,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(a,b,c){var d=!this.opt.element?"mark":this.opt.element;a=a.splitText(b);b=a.splitText(c-b);d=document.createElement(d);d.setAttribute("data-markjs","true");this.opt.className&&d.setAttribute("class",
this.opt.className);d.textContent=a.textContent;a.parentNode.replaceChild(d,a);return b}},{key:"wrapRangeInMappedTextNode",value:function(a,b,c,d,e){var f=this;a.nodes.every(function(g,k){var h=a.nodes[k+1];if("undefined"===typeof h||h.start>b){if(!d(g.node))return!1;var h=b-g.start,j=(c>g.end?g.end:c)-g.start,m=a.value.substr(0,g.start),p=a.value.substr(j+g.start);g.node=f.wrapRangeInTextNode(g.node,h,j);a.value=m+p;a.nodes.forEach(function(c,b){b>=k&&(0<a.nodes[b].start&&b!==k&&(a.nodes[b].start-=
j),a.nodes[b].end-=j)});c-=j;e(g.node.previousSibling,g.start);if(c>g.end)b=g.end;else return!1}return!0})}},{key:"wrapGroups",value:function(a,b,c,d){a=this.wrapRangeInTextNode(a,b,b+c);d(a.previousSibling);return a}},{key:"separateGroups",value:function(a,b,c,d,e){c=b.length;for(var f=1;f<c;f++){var g=a.textContent.indexOf(b[f]);b[f]&&(-1<g&&d(b[f],a))&&(a=this.wrapGroups(a,g,b[f].length,e))}return a}},{key:"wrapMatches",value:function(a,b,c,d,e){var f=this,g=0===b?0:b+1;this.getTextNodes(function(b){b.nodes.forEach(function(b){b=
b.node;for(var e;null!==(e=a.exec(b.textContent))&&""!==e[g];){if(f.opt.separateGroups)b=f.separateGroups(b,e,g,c,d);else{if(!c(e[g],b))continue;var k=e.index;if(0!==g)for(var p=1;p<g;p++)k+=e[p].length;b=f.wrapGroups(b,k,e[g].length,d)}a.lastIndex=0}});e()})}},{key:"wrapMatchesAcrossElements",value:function(a,b,c,d,e){var f=this,g=0===b?0:b+1;this.getTextNodes(function(b){for(var h;null!==(h=a.exec(b.value))&&""!==h[g];){var j=h.index;if(0!==g)for(var m=1;m<g;m++)j+=h[m].length;f.wrapRangeInMappedTextNode(b,
j,j+h[g].length,function(a){return c(h[g],a)},function(b,c){a.lastIndex=c;d(b)})}e()})}},{key:"wrapRangeFromIndex",value:function(a,b,c,d){var e=this;this.getTextNodes(function(f){var g=f.value.length;a.forEach(function(a,d){var j=e.checkWhitespaceRanges(a,g,f.value),m=j.start,l=j.end;j.valid&&e.wrapRangeInMappedTextNode(f,m,l,function(c){return b(c,a,f.value.substring(m,l),d)},function(b){c(b,a)})});d()})}},{key:"unwrapMatches",value:function(a){for(var b=a.parentNode,c=document.createDocumentFragment();a.firstChild;)c.appendChild(a.removeChild(a.firstChild));
b.replaceChild(c,a);this.ie?this.normalizeTextNode(b):b.normalize()}},{key:"normalizeTextNode",value:function(a){if(a){if(3===a.nodeType)for(;a.nextSibling&&3===a.nextSibling.nodeType;)a.nodeValue+=a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);else this.normalizeTextNode(a.firstChild);this.normalizeTextNode(a.nextSibling)}}},{key:"markRegExp",value:function(a,b){var c=this;this.opt=b;this.log('Searching with expression "'.concat(a,'"'));var d=0,e="wrapMatches";this.opt.acrossElements&&
(e="wrapMatchesAcrossElements");this[e](a,this.opt.ignoreGroups,function(a,b){return c.opt.filter(b,a,d)},function(a){d++;c.opt.each(a)},function(){0===d&&c.opt.noMatch(a);c.opt.done(d)})}},{key:"mark",value:function(a,b){var c=this;this.opt=b;var d=0,e="wrapMatches",f=this.getSeparatedKeywords("string"===typeof a?[a]:a),g=f.keywords,k=f.length,f=function j(a){var b=(new z(c.opt)).create(a),f=0;c.log('Searching with expression "'.concat(b,'"'));c[e](b,1,function(b,e){return c.opt.filter(e,a,d,f)},
function(a){f++;d++;c.opt.each(a)},function(){0===f&&c.opt.noMatch(a);g[k-1]===a?c.opt.done(d):j(g[g.indexOf(a)+1])})};this.opt.acrossElements&&(e="wrapMatchesAcrossElements");0===k?this.opt.done(d):f(g[0])}},{key:"markRanges",value:function(a,b){var c=this;this.opt=b;var d=0,e=this.checkRanges(a);e&&e.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(e)),this.wrapRangeFromIndex(e,function(a,b,d,e){return c.opt.filter(a,b,d,e)},function(a,b){d++;c.opt.each(a,b)},function(){c.opt.done(d)})):
this.opt.done(d)}},{key:"unmark",value:function(a){var b=this;this.opt=a;var c=this.opt.element?this.opt.element:"*",c=c+"[data-markjs]";this.opt.className&&(c+=".".concat(this.opt.className));this.log('Removal selector "'.concat(c,'"'));this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(a){b.unwrapMatches(a)},function(a){var e=t.matches(a,c);a=b.matchesExclude(a);return!e||a?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(a){this._opt=s({},{element:"",
className:"",exclude:[],iframes:!1,iframesTimeout:5E3,separateWordSearch:!0,acrossElements:!1,ignoreGroups:0,each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},a)},get:function(){return this._opt}},{key:"iterator",get:function(){return new t(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]);r=x;l.fn.mark=function(a,b){(new r(this.get())).mark(a,b);return this};l.fn.markRegExp=function(a,b){(new r(this.get())).markRegExp(a,
b);return this};l.fn.markRanges=function(a,b){(new r(this.get())).markRanges(a,b);return this};l.fn.unmark=function(a){(new r(this.get())).unmark(a);return this};return l});
