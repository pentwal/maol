Sydney.sidebars=function(){function x(){Sydney.globals.overthrowIsEnabled&&(!c()&&Sydney.settings.getAnimationsEnabled())&&(D.addClass("not-visible"),E.removeClass("not-visible"))}function q(){Sydney.globals.overthrowIsEnabled&&(!c()&&Sydney.settings.getAnimationsEnabled())&&(D.removeClass("not-visible"),E.addClass("not-visible"))}function y(){n&&c()&&g();null!==r&&(clearTimeout(r),r=null,Sydney.globals.overthrowIsEnabled&&q());!a.hasClass("show-left-sidebar-completed")&&!s&&(a.addClass("show-left-sidebar"),
p=!0,Sydney["user-data"].setOfflineData("left-sidebar-open",!0),c()||x(),s=setTimeout(function(){a.addClass("show-left-sidebar-completed");q();Sydney.events.trigger("sidebars","sidebarsStateChanged");s=null},Sydney.settings.getAnimationsEnabled()?z:0))}function f(){a.hasClass("show-left-sidebar-completed")&&!r?a.removeClass("show-left-sidebar-completed"):a.hasClass("show-left-sidebar")&&null!==s&&(clearTimeout(s),s=null);a.removeClass("show-left-sidebar");p=!1;Sydney["user-data"].setOfflineData("left-sidebar-open",
!1);c()||x();r=setTimeout(function(){q();Sydney.events.trigger("sidebars","sidebarsStateChanged");r=null},Sydney.settings.getAnimationsEnabled()?z:0)}function A(){p&&c()&&f();null!==u&&(clearTimeout(u),u=null,q());!a.hasClass("show-right-sidebar-completed")&&!t&&(x(),a.addClass("show-right-sidebar"),n=!0,Sydney["user-data"].setOfflineData("right-sidebar-open",!0),t=setTimeout(function(){a.addClass("show-right-sidebar-completed");q();Sydney.events.trigger("sidebars","sidebarsStateChanged");t=null},
Sydney.settings.getAnimationsEnabled()?z:0))}function g(){x();u=setTimeout(function(){q();Sydney.events.trigger("sidebars","sidebarsStateChanged");u=null},Sydney.settings.getAnimationsEnabled()?z:0);a.hasClass("show-right-sidebar-completed")?a.removeClass("show-right-sidebar-completed"):a.hasClass("show-right-sidebar")&&null!==t&&(clearTimeout(t),t=null);a.removeClass("show-right-sidebar");n=!1;Sydney["user-data"].setOfflineData("right-sidebar-open",!1)}function G(){Sydney.globals.overthrowIsEnabled?
$(window).width()<Sydney.globals.mobileBreakpoint&&setTimeout(function(){f();g()},50):(f(),g())}function H(){"left"===j?(d=e=a.hasClass("show-left-sidebar-completed")?k:0,b.addClass("transitions-disabled"),l.addClass("transitions-disabled"),a.removeClass("show-left-sidebar-completed"),B?(b.css("-ms-transform","translate("+e+"px, 0)"),l.css("-ms-transform","translate("+e+"px, 0)")):(b.css("-webkit-transform","translate("+e+"px, 0)"),l.css("-webkit-transform","translate("+e+"px, 0)"))):"right"===j&&
(d=e=a.hasClass("show-right-sidebar-completed")?-k:0,b.addClass("transitions-disabled"),m.addClass("transitions-disabled"),a.removeClass("show-right-sidebar-completed"),B?(b.css("-ms-transform","translate("+e+"px, 0)"),m.css("-ms-transform","translate("+e+"px, 0)")):(b.css("-webkit-transform","translate("+e+"px, 0)"),m.css("-webkit-transform","translate("+e+"px, 0)")))}function I(a){var J=a.attr("data-id"),b=$("#"+J);$(".left-sidebar-tab").removeClass("active");a.addClass("active");$(".left-sidebar-tab-content").removeClass("active");
b.addClass("active");C=a;Sydney.events.trigger("sidebars","leftSidebarTabChanged",J)}function K(){c()&&(p&&n)&&(a.removeClass("animate-sidebar"),setTimeout(function(){f();a.addClass("animate-sidebar")},0))}function c(){return $(window).width()<Sydney.globals.mobileBreakpoint}var l,m,F,b,a,D,E,z=300,s=null,t=null,r=null,u=null,j=null,v=!1,e=null,d=null,w=0,k=270,C=null,p=!0,n=!1,B=null;return{init:function(){a=Sydney.globals.$htmlEl;b=$("#main");l=$("#left-sidebar");m=$("#right-sidebar");F=$("#sidebar-active-overlay");
D=$("#topbar-right-buttons");E=$("#fake-topbar-right-buttons");Sydney["user-data"].getOfflineData("left-sidebar-open",function(h){null!==h&&(p=h);if(p&&(a.addClass("show-left-sidebar").addClass("show-left-sidebar-completed"),c())){setTimeout(function(){a.addClass("animate-sidebar")},0);return}Sydney["user-data"].getOfflineData("right-sidebar-open",function(h){null!==h&&(n=h);n&&a.addClass("show-right-sidebar").addClass("show-right-sidebar-completed");setTimeout(function(){a.addClass("animate-sidebar")},
0)})})},start:function(){B=Sydney["platform-wp"].getIsWindowsPhone();C=$("#left-sidebar-tabs").children().first();$(window).resize(_.debounce(K,200));$("#left-sidebar-close-button").click(function(){hideSidebar()});$(".left-sidebar-tab").click(function(){var a=$(this);a.hasClass("active")||(I(a),Sydney.search.exitSearchIfIsOpen())});F.click(function(h){a.hasClass("show-left-sidebar")&&f();a.hasClass("show-right-sidebar")&&g();h.preventDefault()});F.on("touchstart",function(a){a.preventDefault()});
if(Sydney.globals.overthrowIsEnabled&&Sydney.globals.cssTransitionsEnabled&&Sydney.settings.getAnimationsEnabled())a.hammer().on("dragstart",function(h){if(Sydney.settings.getAnimationsEnabled()&&c()){var b=a.hasClass("show-left-sidebar-completed"),e=a.hasClass("show-right-sidebar-completed"),d=h.gesture.center.pageX,f=!b&&30>d||b&&240<d,d=!e&&d>$(window).width()-30||e&&d<$(window).width()-240;f&&!e?(j="left",H(),v=!0,h.gesture.preventDefault()):d&&!b&&(j="right",H(),v=!0,h.gesture.preventDefault())}}).on("dragright dragleft",
function(a){if(v){var f=e+a.gesture.deltaX,c,g;"left"===j?(g=l,c=Math.min(k,Math.max(0,f))):"right"===j&&(g=m,c=Math.max(-k,Math.min(0,f)));0!==c-d&&(w=c-d);d=c;B?(b.css("-ms-transform","translate("+d+"px, 0)"),g.css("-ms-transform","translate("+d+"px, 0)")):(b.css("-webkit-transform","translate("+d+"px, 0)"),g.css("-webkit-transform","translate("+d+"px, 0)"));a.gesture.preventDefault()}}).on("dragend",function(a){if(v){var c;"left"===j?(c=e+a.gesture.deltaX,Math.min(k,Math.max(0,c)),b.removeClass("transitions-disabled"),
b.css("-webkit-transform",""),b.css("-ms-transform",""),l.removeClass("transitions-disabled"),l.css("-webkit-transform",""),l.css("-ms-transform",""),0!==w?0<w?y():f():d>k/2?y():f()):"right"===j&&(c=e+a.gesture.deltaX,Math.max(-k,Math.min(0,c)),b.removeClass("transitions-disabled"),b.css("-webkit-transform",""),b.css("-ms-transform",""),m.removeClass("transitions-disabled"),m.css("-webkit-transform",""),m.css("-ms-transform",""),0!==w?0>w?A():g():d<k/2?A():g());v=!1;a.gesture.preventDefault()}});
Sydney.events.on("article","afterArticleOpen",G)},showLeftSidebar:y,hideLeftSidebar:f,toggleLeftSidebar:function(){p?f():y()},showRightSidebar:A,hideRightSidebar:g,toggleRightSidebar:function(){n?g():A()},clearActiveTabs:function(){$(".left-sidebar-tab").removeClass("active");$(".left-sidebar-tab-content").removeClass("active")},restorePreviousLeftSidebarTab:function(){null!==C&&I(C)},hideSidebarsIfNeededToShowContent:G}}();
